{
  "id": "samba-ad-dc",
  "title": "Samba AD DC",
  "description": "Windows-native Active Directory Domain Controller (Kerberos + LDAP) for household SSO backbone.",
  "icon": "https://upload.wikimedia.org/wikipedia/commons/7/7b/Samba_logo.svg",
  "image": "instantlinux/samba-ad-dc:latest",
  "ports": [],
  "volumes": [
    { "container": "/var/lib/samba", "host": "/DATA/AppData/samba-ad-dc/lib" },
    { "container": "/etc/samba", "host": "/DATA/AppData/samba-ad-dc/etc" },
    { "container": "/var/log/samba", "host": "/DATA/AppData/samba-ad-dc/logs" }
  ],
  "envs": [
    { "name": "SAMBA_DOMAIN", "value": "HOUSE" },
    { "name": "SAMBA_REALM", "value": "HOUSE.LOCAL" },
    { "name": "SAMBA_ADMIN_PASS", "value": "${SAMBA_ADMIN_PASS}" },
    { "name": "SAMBA_DNS_BACKEND", "value": "NONE" },
    { "name": "DNS_FORWARDER", "value": "10.0.0.1" },
    { "name": "NTPSERVER_LIST", "value": "time.windows.com" }
  ],
  "networks": [
    {
      "name": "Backend",
      "driver": "macvlan",
      "subnet": "10.0.83.0/24",
      "gateway": "10.0.83.1",
      "parent": "br0.83",
      "mac_address": "52:42:00:02:83:03"
    },
    {
      "name": "Infrastructure",
      "driver": "macvlan",
      "subnet": "10.0.0.0/24",
      "gateway": "10.0.0.1",
      "parent": "br0",
      "mac_address": "52:42:00:02:01:03"
    }
  ],
  "restart_policy": "always",
  "categories": ["Identity", "Directory"],
  "healthcheck": {
    "test": [
      "CMD-SHELL",
      "nc -z localhost 389 && nc -z localhost 3268 && nc -z localhost 445 && nc -zu localhost 88"
    ],
    "interval": "30s",
    "timeout": "10s",
    "retries": 5
  }
}
